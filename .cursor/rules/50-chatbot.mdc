---
description: Chatbot accesible y ético (no asesoría legal real). Implementación actual con n8n.
globs: ["src/components/ChatbotWidget.tsx", "src/components/legal/Disclaimer.tsx"]
alwaysApply: true
---

# Chatbot legal (n8n)
- Flujo conversacional servido por n8n (`createChat` vía CDN).
- Se monta como isla React (`<ChatbotWidget client:idle />`) desde `BaseLayout`.
- Disclaimers legales integrados en el mensaje de bienvenida.

## Reglas UX/Ética (CRÍTICAS)
- **DEBE** avisar en la primera interacción: “No constituye asesoría legal ni crea relación abogado-cliente. No compartas datos sensibles.”
- **DEBE** ofrecer alternativas humanas visibles (teléfono, email o formulario enlazado en el mensaje).
- **NUNCA** prometer resultados, plazos garantizados ni certificaciones no acreditadas (ABA 7.1 / 7.2).
- **DEBE** vincular a la Política de Privacidad y Términos en el copy (mencionar URLs explícitas o invitar a revisarlas en el sitio).

## Implementación técnica
- `ChatbotWidget.tsx` añade el CSS remoto solo si no existe (`id="n8n-chat-style"`).
- Inyecta un `<script type="module">` único (`id="n8n-chat-script"`) con `createChat({ ... })`.
- Tema corporativo: `primaryColor #0E4A69`, fondo blanco, tipografía `Inter`, borde redondeado `14px`.
- `welcomeMessage` contextual en español, recuerda la naturaleza informativa del bot y sugiere agendar consulta.
- `placeholder` conversacional (`"Cuéntanos brevemente tu situación legal..."`).
- `showPoweredBy: false`, `timeout: 30000`, `retries: 2`, cabeceras JSON predefinidas.
- Cualquier ajuste futuro debe preservar los guards (`if (document.getElementById(...)) return;`) para evitar instancias duplicadas.

## Buenas prácticas de UX
- El botón/launcher hereda estilos del script, pero validar contraste y posición en QA visual.
- Reforzar datos de contacto humanos en copy (teléfono: `+56 32 3428987`, email: `contacto@mgm-abogados.cl`).
- Mantener consistencia de tono con el sitio (trato profesional, lenguaje claro, sin jerga técnica innecesaria).
- Si se requiere un disclaimer adicional en la UI, reutilizar `components/legal/Disclaimer.tsx`.

## Checklist de implementación
- [ ] Script y stylesheet remotos cargados una sola vez.
- [ ] Mensaje de bienvenida actualizado al contexto MGM Abogados.
- [ ] Disclaimers legales visibles en la conversación inicial.
- [ ] Links/CTA hacia contacto humano presentes en el flujo (n8n).
- [ ] Sin errores en consola durante carga perezosa (`client:idle`).
