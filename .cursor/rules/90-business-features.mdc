---
description: Funcionalidades de negocio vigentes (formularios y servicios de apoyo)
globs: ["src/components/business/**/*.{ts,tsx}", "src/lib/**/*.{ts}"]
alwaysApply: true
---

# Alcance actual
- `ContactForm.tsx` (principal) y `AppointmentForm.tsx` (si se usa en páginas de área).
- Servicios: `lib/validations.ts`, `lib/crm.ts` (placeholder), `lib/email.ts` (EmailJS u otro), `lib/constants.ts`.

# Reglas obligatorias
- Validación Zod; errores visibles y semánticos (usar `aria-invalid`).
- `SelectTrigger` con fondo blanco (`bg-white`) y contraste AA.
- Consentimiento de privacidad obligatorio antes de enviar.
- Aviso legal visible: “No constituye asesoría legal ni crea relación abogado‑cliente”.
- Alternativas humanas siempre visibles: teléfono `+56 32 3428987`, email `contacto@mgm-abogados.cl`.

# Rendimiento
- Hidratar formularios solo donde aparecen (`client:load` en contacto; `client:idle` si es posible).
- Lazy‑load de calendario/fecha y evitar dependencias innecesarias.

# Seguridad
- No persistir PII en `localStorage`/`sessionStorage`.
- Sanitizar inputs y evitar logs con datos sensibles.

# Integraciones
- `crm.ts` y `email.ts` pueden operar en modo mock sin credenciales. Variables sensibles en `.env`.

# Métricas (opcional)
- Si GA está activo, eventos: `contact_form_submit`, `appointment_booked`.

# Checklist rápido
- Labels claros, placeholders útiles y focus visible
- Estados loading/disabled en botón de envío
- Mensajes de error comprensibles
- Disclaimers y consentimiento presentes